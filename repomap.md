# RepoMap - repomap

**Generated by Repomap**

## Folder Information

- **Name**: repomap
- **Path**: `C:/workspace/environment/repomap`
- **File Count**: 9 files
- **Size**: 0.13 MB
- **Generated**: 2025-07-03 22:59:01
- **AI Analysis**: Complete (3 files analyzed)

## Filetree

├── src/
│   ├── config.py [244 lines]
│   └── hello.py [1301 lines]
├── .gitignore [13 lines]
├── .python-version [1 lines]
├── pyproject.toml [12 lines]
├── README.md [6 lines]
├── requirements.txt [1 lines]
├── run.py [23 lines]
└── uv.lock [760 lines]

## AI Analysis Results

*Generated using Gemini API*

### src\config.py

**Module Constants:**
- `DEFAULT_GITIGNORE_PATTERNS` = ["repomap.md", "node_modules/", "venv/", ...] - A comprehensive list of default file and directory patterns to be ignored by version control, used when no .gitignore file is found in the repository.
- `AI_MODEL_NAME` = gemini-2.5-pro - Specifies the name of the AI model to be used for code analysis.
- `AI_MAX_WORKERS` = 5 - Defines the maximum number of concurrent worker threads for processing AI analysis tasks.
- `SUPPORTED_CODE_EXTENSIONS` = {'.py', '.js', '.ts', '.jsx', '.tsx', ...} - A set of file extensions that the tool recognizes as source code files for analysis.
- `AI_PROMPT_TEMPLATE` = "Analyze this code file and return ONLY a valid JSON object..." - The template string for the prompt sent to the AI model. It provides instructions, the required JSON output structure, and placeholders for file details.

---

### run.py

---

### src\hello.py

**Classes:**
- **`FileChangeHandler`** - Handles file system events (modification, creation, deletion) for a watched folder. It debounces events to trigger analysis or metadata updates on the main application without excessive processing.
  - `__init__(self, app: RepomapApp, folder_path: str)` - Initializes the file system event handler.
  - `set_folder_index(self, index: int) -> None` - Sets the index of the folder this handler is watching, used to update the correct data structure in the main app.
  - `on_modified(self, event) -> None` - Triggered when a file is modified. It adds the file to a pending set for debounced re-analysis if it's a non-ignored code file.
  - `on_created(self, event) -> None` - Triggered when a file is created. It schedules new code files for analysis and triggers a full metadata update.
  - `on_deleted(self, event) -> None` - Triggered when a file is deleted. It removes the analysis data for the deleted file and triggers a full metadata update.
  - `trigger_full_update(self) -> None` - Schedules a debounced update of the folder's metadata and filetree.
  - `perform_full_update(self) -> None` - Performs the actual metadata update (file count, size, filetree) and regenerates the RepoMap.md file.
  - `analyze_pending_files(self) -> None` - Analyzes all files in the pending set using the AI service, merges the results, and updates the UI.
  - `app` (RepomapApp) - A reference to the main application instance.
  - `folder_path` (str) - The absolute path of the folder being watched.
  - `folder_index` (int) - The index of the watched folder within the application's list of folders.
  - `pending_files` (set) - A set of file paths that have changed and are awaiting debounced analysis.
  - `debounce_timer` (object) - The Tkinter timer object used for debouncing file system events.

- **`RepomapApp`** - The main application class that manages the Tkinter GUI, folder tracking, AI analysis orchestration, and file watching.
  - `__init__(self) -> None` - Initializes the main application window, loads data, and sets up UI components and services.
  - `create_toolbar(self) -> None` - Creates and packs the main toolbar with buttons for adding folders, deleting selections, and viewing AI status.
  - `select_folder(self) -> None` - Opens a system dialog for the user to select a folder to add to Repomap.
  - `add_folder(self, folder_path: str) -> None` - Adds a folder to the application, gathers its metadata, starts a file watcher, and kicks off background AI analysis.
  - `run_ai_analysis_async(self, folder_path: str, folder_index: int) -> None` - Runs the comprehensive AI analysis for a folder in a separate thread to keep the UI responsive.
  - `load_gitignore_patterns(self, folder_path: str) -> list` - Loads and parses .gitignore rules from the specified folder and its parent directories. Creates a default .gitignore if none is found.
  - `create_default_gitignore(self, folder_path: str) -> None` - Creates a .gitignore file with a set of default patterns relevant to the project's content.
  - `add_repomap_to_gitignore(self, gitignore_path: str, existing_content: str) -> None` - Appends 'repomap.md' to an existing .gitignore file to prevent it from being committed.
  - `create_repomap_md(self, folder_path: str, folder_info: dict) -> None` - Generates or updates the `repomap.md` file in the folder's root with metadata, a filetree, and AI analysis results.
  - `generate_filetree(self, folder_path: str) -> list` - Generates a hierarchical, text-based filetree of the repository, respecting .gitignore rules and showing line counts.
  - `save_folders(self) -> None` - Saves the list of tracked folders and their metadata to a persistent JSON file.
  - `load_saved_folders(self) -> None` - Loads tracked folder data from the persistent JSON file on application startup.
  - `is_ignored(self, file_path: str, folder_path: str, gitignore_patterns: list) -> bool` - Checks if a given file or directory should be ignored based on loaded .gitignore patterns.
  - `count_files(self, folder_path: str) -> int` - Counts the number of non-ignored files within a tracked folder.
  - `get_folder_size(self, folder_path: str) -> str` - Calculates the total size of all non-ignored files in a folder and returns it as a formatted string (MB or GB).
  - `update_display(self) -> None` - Refreshes the main UI, redrawing the folder cards or showing the empty state.
  - `create_folder_card(self, parent: tk.Frame, folder: dict, index: int) -> None` - Creates a single UI card widget to display information about a tracked folder.
  - `remove_folder(self, index: int) -> None` - Removes a single folder from the application after user confirmation.
  - `delete_selected_folders(self) -> None` - Removes all currently selected folders from the application after user confirmation.
  - `setup_ai_analysis(self) -> None` - Checks for Gemini/Google API keys in environment variables and configures the generative AI service.
  - `setup_file_watching(self) -> None` - Initializes and starts the `watchdog` file system observers for all loaded folders.
  - `analyze_file_with_ai(self, file_path: str, folder_path: str, gitignore_patterns: list) -> dict | None` - Analyzes a single code file using the configured AI model, sending its content and parsing the structured JSON response.
  - `analyze_folder_with_ai(self, folder_path: str) -> list` - Analyzes all supported code files in a folder using a thread pool for concurrent AI API requests.
  - `is_code_file(self, file_path: str) -> bool` - Checks if a file's extension is in the list of supported code file types for AI analysis.
  - `run(self) -> None` - Starts the Tkinter main event loop and ensures file watchers are cleaned up on exit.
  - `root` (tk.Tk) - The root Tkinter window for the application.
  - `storage_file` (str) - Path to the JSON file used for persisting the list of tracked folders.
  - `folders` (list[dict]) - Stores the data for each tracked folder, including path, metadata, and AI analysis results.
  - `selected_folders` (set[int]) - A set of indices corresponding to the folders currently selected in the UI.
  - `ai_enabled` (bool) - A flag indicating whether AI analysis is available and configured with an API key.
  - `file_watchers` (dict) - A dictionary mapping folder paths to their (observer, handler) tuple for file system watching.


**Standalone Functions:**
- `main() -> None` - The main entry point of the script. It instantiates and runs the RepomapApp.

**Module Variables:**
- `AI_AVAILABLE` (bool) - A boolean flag that is True if the 'google.generativeai' library was successfully imported, False otherwise.
- `WATCHDOG_AVAILABLE` (bool) - A boolean flag that is True if the 'watchdog' library was successfully imported, False otherwise.

---

