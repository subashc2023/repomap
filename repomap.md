# RepoMap - repomap

**Generated by Repomap**

## Folder Information

- **Name**: repomap
- **Path**: `C:/workspace/environment/repomap`
- **File Count**: 9 files
- **Size**: 0.12 MB
- **Generated**: 2025-07-03 23:25:03
- **AI Analysis**: Complete (3 files analyzed)

## Filetree

```
├── src/
│   ├── config.py [220 lines]
│   └── hello.py [1212 lines]
├── .gitignore [13 lines]
├── .python-version [1 lines]
├── pyproject.toml [12 lines]
├── README.md [13 lines]
├── requirements.txt [1 lines]
├── run.py [23 lines]
└── uv.lock [760 lines]
```

## AI Analysis Results

*Generated using Gemini API*

### src\config.py

**Module Constants:**
- `AI_MODEL_NAME` = gemini-2.5-flash - The name of the AI model to be used for code analysis.
- `DEFAULT_GITIGNORE_PATTERNS` - A list of default file and directory patterns to ignore, used when no .gitignore file is present.
- `AI_MAX_WORKERS` = 5 - The maximum number of concurrent workers allowed for AI analysis tasks.
- `SUPPORTED_CODE_EXTENSIONS` - A set of file extensions that are recognized as supported code files for AI analysis.
- `AI_PROMPT_TEMPLATE` - A multi-line string template used to construct the prompt sent to the AI model for code analysis, including instructions for the expected JSON output.

---

### run.py

**Module Variables:**
- `sys` (module) - The 'sys' module, providing access to system-specific parameters and functions, used here for path manipulation.
- `os` (module) - The 'os' module, providing a way of using operating system dependent functionality, used here for path manipulation.
- `main` (function) - The main entry point function imported from 'src/hello.py' to run the application logic.
- `RepomapApp` (class) - The main application class imported from 'src/hello.py'.

---

### src\hello.py

**Classes:**
- **`FileChangeHandler`** - Handles file system events for automatic re-analysis and updates.
  - `__init__(self, app, folder_path)` - Initializes the handler with the main application instance and the watched folder path.
  - `set_folder_index(self, index)` - Sets the index of the folder in the main application's folders list.
  - `on_modified(self, event)` - Handles file modification events, debouncing re-analysis for code files.
  - `on_created(self, event)` - Handles file creation events, triggering analysis for code files and full updates.
  - `on_deleted(self, event)` - Handles file deletion events, removing associated AI analysis and triggering full updates.
  - `trigger_full_update(self)` - Triggers a debounced full update of folder metadata and filetree.
  - `perform_full_update(self)` - Executes a full folder update, including metadata and filetree, saving, and updating the display.
  - `analyze_pending_files(self)` - Analyzes a batch of debounced, changed files with AI and updates the folder's analysis.

- **`RepomapApp`** - The main application class for Repomap, managing folders, UI, AI analysis, and file watching.
  - `__init__(self)` - Initializes the Repomap application, setting up UI, persistence, AI, file watchers, and loading saved folders.
  - `create_toolbar(self)` - Creates the application's toolbar with buttons and status indicators.
  - `select_folder(self)` - Opens a dialog to select a folder and adds it to the application.
  - `add_folder(self, folder_path)` - Adds a new folder, initializes its metadata, creates repomap.md, saves data, and starts AI analysis asynchronously.
  - `run_ai_analysis_async(self, folder_path, folder_index)` - Runs the AI analysis for a folder in a background thread.
  - `load_gitignore_patterns(self, folder_path)` - Loads .gitignore patterns from the specified folder and its parent directories.
  - `create_default_gitignore(self, folder_path)` - Creates a default .gitignore file with relevant patterns in the specified folder.
  - `add_repomap_to_gitignore(self, gitignore_path, existing_content)` - Adds repomap.md to an existing .gitignore file.
  - `pattern_matches_existing(self, pattern, all_items)` - Checks if a gitignore pattern matches any existing files or directories.
  - `create_repomap_md(self, folder_path, folder_info)` - Generates and writes the repomap.md file for a given folder with its metadata, filetree, and AI analysis.
  - `get_current_timestamp(self)` - Returns the current timestamp in a readable string format.
  - `count_file_lines(self, file_path)` - Counts the number of lines in a given file.
  - `generate_filetree(self, folder_path)` - Generates a hierarchical filetree string for a folder, respecting ignore rules and including line counts.
  - `save_folders(self)` - Saves the list of managed folders and their data to persistent storage.
  - `load_saved_folders(self)` - Loads previously saved folders from persistent storage, validating paths.
  - `is_ignored(self, file_path, folder_path, gitignore_patterns)` - Checks if a file or directory should be ignored based on .gitignore patterns or implicit rules.
  - `_walk_repository_files(self, folder_path)` - Generator that yields all non-ignored files in a folder.
  - `count_files(self, folder_path)` - Counts the number of non-ignored files in a folder.
  - `should_ignore_implicitly(self, path)` - Checks if a path should be ignored by default (e.g., .git, __pycache__).
  - `get_folder_size(self, folder_path)` - Calculates and formats the total size of non-ignored files in a folder.
  - `show_empty_state(self)` - Displays the empty state UI when no folders are loaded.
  - `update_display(self)` - Clears and redraws the main content area, showing folder cards or the empty state.
  - `create_folder_card(self, parent, folder, index)` - Creates and adds a UI card for a single folder to the display.
  - `_show_confirmation_dialog(self, title, message, delete_repomap_option, confirm_callback)` - Displays a generic confirmation dialog.
  - `remove_folder(self, index)` - Removes a folder from the application after user confirmation.
  - `setup_ai_analysis(self)` - Initializes the AI analysis module (Gemini API) if API keys are available.
  - `setup_file_watching(self)` - Initializes file watchers for all currently managed folders.
  - `start_watching_folder(self, folder_path, folder_index)` - Starts a watchdog observer for a specific folder.
  - `stop_watching_folder(self, folder_path)` - Stops the watchdog observer for a specific folder.
  - `update_folder_watcher_index(self, folder_path, new_index)` - Updates the index reference for a folder's file watcher.
  - `refresh_folder_metadata(self, folder_index)` - Recalculates and updates basic metadata (file count, size) for a folder.
  - `analyze_file_with_ai(self, file_path, folder_path, gitignore_patterns)` - Analyzes a single code file using the configured AI model to extract structural information.
  - `parse_fallback_analysis(self, response_text, file_path, folder_path)` - Provides a simple fallback parsing mechanism for AI responses that fail JSON decoding.
  - `analyze_folder_with_ai(self, folder_path)` - Analyzes all relevant code files in a folder using multithreaded AI requests.
  - `is_code_file(self, file_path)` - Checks if a file has a supported code extension for AI analysis.
  - `run(self)` - Starts the Tkinter event loop and ensures cleanup of file watchers on exit.
  - `cleanup_file_watchers(self)` - Stops all active watchdog observers.


**Standalone Functions:**
- `main()` - The entry point of the application, initializes and runs the RepomapApp.

**Module Constants:**
- `DEFAULT_GITIGNORE_PATTERNS` = Summarized: A list of common patterns for files and directories to ignore. - A list of default patterns used for auto-generated .gitignore files.
- `AI_MODEL_NAME` = Model name string - The name of the AI model to use for code analysis.
- `AI_PROMPT_TEMPLATE` = Summarized: A multi-line string prompt template for AI code analysis. - A template string used to construct prompts for AI code analysis requests.
- `AI_MAX_WORKERS` = Integer - The maximum number of concurrent workers for AI analysis.
- `SUPPORTED_CODE_EXTENSIONS` = Set of strings - A set of file extensions that are considered code files for AI analysis.

**Module Variables:**
- `AI_AVAILABLE` (bool) - A flag indicating whether the Google Generative AI library was successfully imported.
- `WATCHDOG_AVAILABLE` (bool) - A flag indicating whether the watchdog library for file system monitoring was successfully imported.

---

